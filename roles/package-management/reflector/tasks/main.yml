---
# tasks file for reflector
- name: install dependencies
  become: true
  pacman:
    name: "{{ reflector_packages }}"

- name: setup country
  become: true
  lineinfile:
    path: /etc/xdg/reflector/reflector.conf
    regexp: '^# --country France,Germany'
    line: '--country Russia,Germany'
  changed_when: false

- name: setup repo count
  become: true
  lineinfile:
    path: /etc/xdg/reflector/reflector.conf
    regexp: '^--latest 5'
    line: '--latest 20'
  changed_when: false

- name: enable reflector service
  become: true
  systemd:
    name: reflector.service
    enabled: yes

- name: Enable mirror list update schedule.
  become: true
  systemd:
    name: reflector.timer
    state: started
    enabled: yes
